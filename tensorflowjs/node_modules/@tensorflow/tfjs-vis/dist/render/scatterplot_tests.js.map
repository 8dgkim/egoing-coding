{"version":3,"file":"scatterplot_tests.js","sourceRoot":"","sources":["../../src/render/scatterplot_tests.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {scatterplot} from './scatterplot';\n\ndescribe('renderScatterplot', () => {\n  let pixelRatio: number;\n\n  beforeEach(() => {\n    document.body.innerHTML = '<div id=\"container\"></div>';\n    pixelRatio = window.devicePixelRatio;\n  });\n\n  it('renders a scatterplot', async () => {\n    const data = {\n      values: [\n        {x: 0, y: 50},\n        {x: 1, y: 100},\n        {x: 2, y: 230},\n      ]\n    };\n\n    const container = document.getElementById('container');\n    await scatterplot(container, data);\n\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n  });\n\n  it('renders the chart with multiple series', async () => {\n    const data = {\n      values: [\n        [\n          {x: 0, y: 50},\n          {x: 1, y: 100},\n          {x: 2, y: 230},\n        ],\n        [\n          {x: 0, y: 20},\n          {x: 1, y: 300},\n          {x: 2, y: 630},\n        ],\n      ]\n    };\n\n    const container = document.getElementById('container');\n\n    await scatterplot(container, data);\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n\n    await scatterplot(container, data);\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n  });\n\n  it('renders a line chart with multiple series custom names', async () => {\n    const data = {\n      values: [\n        [\n          {x: 0, y: 50},\n          {x: 1, y: 100},\n          {x: 2, y: 230},\n        ],\n        [\n          {x: 0, y: 20},\n          {x: 1, y: 300},\n          {x: 2, y: 630},\n        ],\n      ],\n      series: ['First', 'Second'],\n    };\n\n    const container = document.getElementById('container');\n\n    await scatterplot(container, data);\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n  });\n\n  it('updates the chart', async () => {\n    let data = {\n      values: [\n        [\n          {x: 0, y: 50},\n          {x: 1, y: 100},\n          {x: 2, y: 230},\n        ],\n        [\n          {x: 0, y: 20},\n          {x: 1, y: 300},\n          {x: 2, y: 630},\n        ],\n      ],\n      series: ['First', 'Second'],\n    };\n\n    const container = document.getElementById('container');\n\n    await scatterplot(container, data);\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n\n    data = {\n      values: [\n        [\n          {x: 0, y: 50},\n          {x: 1, y: 100},\n          {x: 2, y: 230},\n        ],\n        [\n          {x: 0, y: 20},\n          {x: 1, y: 300},\n          {x: 2, y: 630},\n          {x: 3, y: 530},\n          {x: 4, y: 230},\n        ],\n      ],\n      series: ['First', 'Second'],\n    };\n\n    await scatterplot(container, data);\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n  });\n\n  it('sets width of chart', async () => {\n    const data = {\n      values: [\n        {x: 0, y: 50},\n        {x: 1, y: 100},\n        {x: 2, y: 230},\n      ]\n    };\n\n    const container = document.getElementById('container');\n    await scatterplot(container, data, {width: 400});\n\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n    expect(document.querySelectorAll('canvas').length).toBe(1);\n    expect(document.querySelector('canvas').width).toBe(400 * pixelRatio);\n  });\n\n  it('sets height of chart', async () => {\n    const data = {\n      values: [\n        {x: 0, y: 50},\n        {x: 1, y: 100},\n        {x: 2, y: 230},\n      ]\n    };\n\n    const container = document.getElementById('container');\n    await scatterplot(container, data, {height: 200});\n\n    expect(document.querySelectorAll('.vega-embed').length).toBe(1);\n    expect(document.querySelectorAll('canvas').length).toBe(1);\n    expect(document.querySelector('canvas').height).toBe(200 * pixelRatio);\n  });\n});\n"]}