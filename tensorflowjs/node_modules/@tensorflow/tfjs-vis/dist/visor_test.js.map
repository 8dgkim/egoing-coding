{"version":3,"file":"visor_test.js","sourceRoot":"","sources":["../src/visor_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {visor} from './index';\n\nconst tick = (ms = 1) => new Promise(resolve => setTimeout(resolve, ms));\n\ndescribe('Visor Singleton', () => {\n  afterEach(() => {\n    document.body.innerHTML = '';\n  });\n\n  it('renders an empty visor', () => {\n    visor();\n    expect(document.querySelectorAll('.visor').length).toBe(1);\n  });\n\n  it('visor.el is an HTMLElement', () => {\n    const visorInstance = visor();\n    expect(visorInstance.el instanceof HTMLElement).toBe(true);\n  });\n\n  it('renders only one visor', () => {\n    const v1 = visor();\n    const v2 = visor();\n    const v3 = visor();\n    expect(document.querySelectorAll('.visor').length).toBe(1);\n    expect(v1).toEqual(v2);\n    expect(v1).toEqual(v3);\n  });\n\n  it('adds a surface', () => {\n    const visorInstance = visor();\n    visorInstance.surface({name: 'surface 1', tab: 'tab 1'});\n    expect(document.querySelectorAll('.tf-surface').length).toBe(1);\n    expect(document.querySelector('.tf-surface').textContent)\n        .toEqual('surface 1');\n\n    expect(document.querySelectorAll('.tf-tab').length).toBe(1);\n    expect(document.querySelector('.tf-tab').textContent).toEqual('tab 1');\n  });\n\n  it('requires a surface name', () => {\n    const visorInstance = visor();\n    expect(() => {\n      // @ts-ignore\n      visorInstance.surface();\n    }).toThrow();\n\n    expect(() => {\n      // @ts-ignore\n      visorInstance.surface('Incorrect Name Param');\n    }).toThrow();\n\n    expect(() => {\n      // @ts-ignore\n      visorInstance.surface({notName: 'Incorrect Name Param'});\n    }).toThrow();\n  });\n\n  it('retrieves a surface', () => {\n    const visorInstance = visor();\n    const s1 = visorInstance.surface({name: 'surface 1', tab: 'tab 1'});\n    expect(document.querySelectorAll('.tf-surface').length).toBe(1);\n    expect(document.querySelector('.tf-surface').textContent)\n        .toEqual('surface 1');\n\n    const s2 = visorInstance.surface({name: 'surface 1', tab: 'tab 1'});\n    expect(document.querySelectorAll('.tf-surface').length).toBe(1);\n    expect(document.querySelector('.tf-surface').textContent)\n        .toEqual('surface 1');\n\n    expect(s1).toEqual(s2);\n  });\n\n  it('adds a surface with the default tab', () => {\n    const visorInstance = visor();\n    visorInstance.surface({name: 'surface1'});\n\n    expect(document.querySelectorAll('.tf-tab').length).toBe(1);\n    expect(document.querySelector('.tf-tab').textContent).toEqual('Visor');\n  });\n\n  it('adds two surfaces', () => {\n    const visorInstance = visor();\n    const s1 = visorInstance.surface({name: 'surface 1', tab: 'tab 1'});\n    const s2 = visorInstance.surface({name: 'surface 2', tab: 'tab 1'});\n\n    expect(s1).not.toEqual(s2);\n\n    const surfaces = document.querySelectorAll('.tf-surface');\n    expect(surfaces.length).toBe(2);\n    expect(document.querySelectorAll('.tf-tab').length).toBe(1);\n\n    expect(surfaces[0].textContent).toEqual('surface 1');\n    expect(surfaces[1].textContent).toEqual('surface 2');\n  });\n\n  it('switches tabs on surface addition', () => {\n    let tabs;\n    const visorInstance = visor();\n\n    visorInstance.surface({name: 'surface 1', tab: 'tab 1'});\n    tabs = document.querySelectorAll('.tf-tab');\n    expect(tabs[0].getAttribute('data-isactive')).toEqual('true');\n\n    visorInstance.surface({name: 'surface 2', tab: 'tab 2'});\n    tabs = document.querySelectorAll('.tf-tab');\n    expect(tabs[1].getAttribute('data-isactive')).toEqual('true');\n    expect(tabs[0].getAttribute('data-isactive')).toBeFalsy();\n\n    visorInstance.surface({name: 'surface 3', tab: 'tab 3'});\n    tabs = document.querySelectorAll('.tf-tab');\n    expect(tabs[2].getAttribute('data-isactive')).toEqual('true');\n    expect(tabs[0].getAttribute('data-isactive')).toBeFalsy();\n    expect(tabs[1].getAttribute('data-isactive')).toBeFalsy();\n  });\n\n  it('closes/opens', async () => {\n    const visorInstance = visor();\n\n    expect(document.querySelector('.visor').getAttribute('data-isopen'))\n        .toBe('true');\n    expect(visorInstance.isOpen()).toBe(true);\n\n    visorInstance.close();\n    await tick();\n    expect(document.querySelector('.visor').getAttribute('data-isopen'))\n        .toBeFalsy();\n    expect(visorInstance.isOpen()).toBe(false);\n\n    visorInstance.open();\n    await tick();\n    expect(document.querySelector('.visor').getAttribute('data-isopen'))\n        .toBe('true');\n    expect(visorInstance.isOpen()).toBe(true);\n  });\n\n  it('toggles', async () => {\n    const visorInstance = visor();\n\n    expect(document.querySelector('.visor').getAttribute('data-isopen'))\n        .toBe('true');\n    expect(visorInstance.isOpen()).toBe(true);\n\n    visorInstance.toggle();\n    await tick();\n    expect(document.querySelector('.visor').getAttribute('data-isopen'))\n        .toBeFalsy();\n    expect(visorInstance.isOpen()).toBe(false);\n\n    visorInstance.toggle();\n    await tick();\n    expect(document.querySelector('.visor').getAttribute('data-isopen'))\n        .toBe('true');\n    expect(visorInstance.isOpen()).toBe(true);\n  });\n\n  it('fullscreen toggles', async () => {\n    const visorInstance = visor();\n    expect(visorInstance.isOpen()).toBe(true);\n\n    expect(document.querySelector('.visor').getAttribute('data-isfullscreen'))\n        .toBeFalsy();\n\n    visorInstance.toggleFullScreen();\n    await tick();\n    expect(document.querySelector('.visor').getAttribute('data-isfullscreen'))\n        .toBe('true');\n\n    visorInstance.toggleFullScreen();\n    await tick();\n    expect(document.querySelector('.visor').getAttribute('data-isfullscreen'))\n        .toBeFalsy();\n  });\n\n  it('sets the active tab', async () => {\n    let tabs;\n    const visorInstance = visor();\n\n    visorInstance.surface({name: 'surface 1', tab: 'tab 1'});\n    visorInstance.surface({name: 'surface 2', tab: 'tab 2'});\n    visorInstance.surface({name: 'surface 2', tab: 'tab 3'});\n\n    tabs = document.querySelectorAll('.tf-tab');\n    expect(tabs[2].getAttribute('data-isactive')).toEqual('true');\n\n    visorInstance.setActiveTab('tab 2');\n    await tick();\n    tabs = document.querySelectorAll('.tf-tab');\n    expect(tabs[1].getAttribute('data-isactive')).toEqual('true');\n\n    visorInstance.setActiveTab('tab 1');\n    await tick();\n    tabs = document.querySelectorAll('.tf-tab');\n    expect(tabs[0].getAttribute('data-isactive')).toEqual('true');\n\n    visorInstance.setActiveTab('tab 3');\n    await tick();\n    tabs = document.querySelectorAll('.tf-tab');\n    expect(tabs[2].getAttribute('data-isactive')).toEqual('true');\n  });\n\n  it('throws error if tab does not exist', () => {\n    const visorInstance = visor();\n\n    visorInstance.surface({name: 'surface 1', tab: 'tab 1'});\n    visorInstance.surface({name: 'surface 2', tab: 'tab 2'});\n\n    expect(() => {\n      visorInstance.setActiveTab('not present');\n    }).toThrow();\n  });\n\n  it('unbinds keyboard handler', () => {\n    const visorInstance = visor();\n\n    const BACKTICK_KEY = 192;\n    const event = document.createEvent('Event');\n    event.initEvent('keydown', true, true);\n    // @ts-ignore\n    event['keyCode'] = BACKTICK_KEY;\n\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(false);\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(true);\n\n    // Unbind keys\n    visorInstance.unbindKeys();\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(true);\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(true);\n  });\n\n  it('rebinds keyboard handler', () => {\n    const visorInstance = visor();\n\n    const BACKTICK_KEY = 192;\n    const event = document.createEvent('Event');\n    event.initEvent('keydown', true, true);\n    // @ts-ignore\n    event['keyCode'] = BACKTICK_KEY;\n\n    // Unbind keys\n    visorInstance.unbindKeys();\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(true);\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(true);\n\n    // rebind keys\n    visorInstance.bindKeys();\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(false);\n    document.dispatchEvent(event);\n    expect(visorInstance.isOpen()).toBe(true);\n  });\n});\n"]}